{"version":3,"sources":["webpack:///./pages/index.vue?c918","webpack:///./pages/index.vue?3bce","webpack:///./pages/index.vue?70e4","webpack:///./pages/index.vue?ea3c","webpack:///./pages/index.vue?2ca4","webpack:///./pages/index.vue?33c9","webpack:///./pages/index.vue?f4b3","webpack:///./pages/index.vue?a52d","webpack:///./pages/index.vue?b1ff","webpack:///./pages/index.vue","webpack:///./pages/index.vue?b245"],"names":["module","exports","Component","options","__i18n","push","_Ctor","content","__esModule","default","i","locals","add","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","name","data","mainLoading","visible","head","title","this","$t","computed","version","pk","buildTime","build","time","isChangeSaved","$store","state","news","mounted","loadPageAndModuleData","newId","$route","query","id","methods","handleContentTranslate","val","setContentLang","$confirm","confirmButtonText","cancelButtonText","type","catch","$message","message","loading","$loading","lock","text","spinner","background","$axios","get","then","res","code","Error","msg","console","log","initData","JSON","parse","stringify","newsLangs","forEach","element","components","e","test","strContent","replace","error","showWarn","language","commit","err","finally","close","$alert","showConfirmButton","showClose","component","_vm","_h","$createElement","_c","_self","staticClass","ref","on","_v","attrs","_s","installComponents","EditorTopBar","m","EditorTopMiddleBar","EditorSideLeft","EditorSideRight","EditorMainStage","EditorDialogLanguageContentCopy","EditorDialogLanguageContentCopyModuleOption","EditorSessionChecker"],"mappings":"2EAAAA,EAAOC,QAAU,SAAUC,GACzBA,EAAUC,QAAQC,OAASF,EAAUC,QAAQC,QAAU,GACvDF,EAAUC,QAAQC,OAAOC,KAAK,4EACvBH,EAAUC,QAAQG,Q,kBCH3BN,EAAOC,QAAU,SAAUC,GACzBA,EAAUC,QAAQC,OAASF,EAAUC,QAAQC,QAAU,GACvDF,EAAUC,QAAQC,OAAOC,KAAK,oZACvBH,EAAUC,QAAQG,Q,oBCA3B,IAAIC,QAAU,EAAQ,KACnBA,QAAQC,aAAYD,QAAUA,QAAQE,SACnB,iBAAZF,UAAsBA,QAAU,CAAC,CAACP,EAAOU,EAAIH,QAAS,MAC7DA,QAAQI,SAAQX,EAAOC,QAAUM,QAAQI,SAG/BC,EADH,EAAQ,GAA4DH,SAC7D,WAAYF,SAAS,EAAM,CAAC,WAAY,K,08CCTzD,Q,oBCCA,IACIM,EAD8B,EAAQ,EACZC,EAA4B,GAE1DD,EAAwBR,KAAK,CAACL,EAAOU,EAAI,sLAAuL,KAEhOV,EAAOC,QAAUY,G,iCCNjB,sBAAmQ,YAAG,G,iCCAtQ,sBAA6Q,YAAG,G,+DCAhR,I,kBCAmP,ECqCpO,CACbE,KAAM,YACNC,KAFa,WAGX,MAAO,CACLC,aAAa,EACbC,SAAS,IAGbC,KARa,WASX,MAAO,CACLC,MAAOC,KAAKC,GAAG,iBAGnBC,SAAU,CACRC,QADQ,WAEN,OAAOC,EAAGD,SAEZE,UAJQ,WAKN,OAAIC,GAASA,EAAMC,KACV,WAAP,OAAkBD,EAAMC,MAEnB,IAETC,cAVQ,WAWN,OAAOR,KAAKS,OAAOC,MAAMC,KAAKH,gBAGlCI,QA3Ba,WA4BXZ,KAAKa,wBACLb,KAAKS,OAAOC,MAAMC,KAAKG,MAAQd,KAAKe,OAAOC,MAAMC,IAEnDC,QAAS,CAIPC,uBAJO,SAIiBC,GAAK,WAMvBpB,KAAKQ,cACPR,KAAKqB,eAAeD,GAEpBpB,KAAKsB,SAAStB,KAAKC,GAAG,qFAAsFD,KAAKC,GAAG,WAAY,CAC9HsB,kBAAmBvB,KAAKC,GAAG,UAC3BuB,iBAAkBxB,KAAKC,GAAG,WAC1BwB,KAAM,YACLC,OAAM,WACP,EAAKL,eAAeD,GACpB,EAAKO,SAAS,CACZF,KAAM,OACNG,QAAS,EAAK3B,GAAG,mBAQzBY,sBA7BO,WA6BkB,WACvB,GAAGb,KAAKe,OAAOC,MAAMC,GAAI,CACvB,IAAMY,EAAU7B,KAAK8B,SAAS,CAC5BC,MAAM,EACNC,KAAM,UACNC,QAAS,kBACTC,WAAY,uBAGdlC,KAAKmC,OAAOC,IAAI,oBAAsBpC,KAAKe,OAAOC,MAAMC,IAAIoB,MAAK,SAACC,GAAQ,MACxB,EAAhD,GAAuB,OAApBA,SAAA,UAAAA,EAAK3C,YAAL,eAAW4C,QAAkBD,EAAI3C,KAAKA,KACvC,MAAM,IAAI6C,MAAM,iBAAkBF,SAAlB,UAAkBA,EAAK3C,YAAvB,aAAkB,EAAW8C,MAG/CC,QAAQC,IAAI,SAAUL,EAAI3C,KAAKA,MAC/B,IAAMiD,EAAWC,KAAKC,MAAMD,KAAKE,UAAUT,EAAI3C,KAAKA,OAGpD,GAAGiD,EAASI,UAAW,CACrB,IAAMA,EAAY,GAClBN,QAAQC,IAAIC,EAASI,UAAW,aAChCJ,EAASI,UAAUC,SAAQ,SAAAC,SACzB,IAAMhE,QAAUgE,QAAQhE,QAExBgE,QAAQC,WAAa,GACrB,IACKjE,UACDgE,QAAQC,WAAaN,KAAKC,MAAM5D,SAChCwD,QAAQC,IAAIE,KAAKC,MAAM5D,SAAU,aAEnC,MAAMkE,GACN,GAAIlE,QAGF,GADe,aAAamE,KAAKnE,SACrB,CACV,IAAMoE,EAAapE,QAAQqE,QAAQ,eAAe,IAClD,IACEL,QAAQC,WAAaN,KAAKC,MAAMQ,GAChCZ,QAAQC,IAAI,aACZ,MAAOa,GACPd,QAAQC,IAAIa,EAAO,aACnB,EAAKC,iBAGPf,QAAQC,IAAIS,EAAG,YACf,EAAKK,WAIXT,EAAUE,QAAQQ,UAAYR,WAEhCN,EAASI,UAAYA,EAEvB,EAAKvC,OAAOkD,OAAO,mBAAoBf,MAExClB,OAAM,SAACkC,GACN,EAAKjC,SAAS,CACZC,QAAS,EAAK3B,GAAG,uCAAyC2D,EAAIhC,SAC9DH,KAAM,aAGToC,SAAQ,WACPhC,EAAQiC,aAIdzC,eA/FO,SA+FSD,GACdpB,KAAKS,OAAOkD,OAAO,sBAAuBvC,IAE5CqC,SAlGO,WAmGLzD,KAAK+D,OAAO,uBAAwB,KAAM,CACxCC,mBAAmB,EACnBC,WAAW,EACXxC,KAAM,e,kCClKVyC,UAAY,YACd,GHTW,WAAa,IAAIC,EAAInE,KAASoE,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,MAAM,CAACF,EAAG,iBAAiB,CAACG,IAAI,SAASD,YAAY,SAASE,GAAG,CAAC,uBAAyBP,EAAI9C,kBAAkB8C,EAAIQ,GAAG,KAAKL,EAAG,wBAAwB,CAACE,YAAY,oBAAoBE,GAAG,CAAC,uBAAyBP,EAAI9C,kBAAkB8C,EAAIQ,GAAG,KAAKL,EAAG,mBAAmB,CAACG,IAAI,WAAWD,YAAY,kCAAkCI,MAAM,CAAC,eAAe,kBAAkBT,EAAIQ,GAAG,KAAKL,EAAG,oBAAoB,CAACE,YAAY,mCAAmCI,MAAM,CAAC,eAAe,kBAAkBT,EAAIQ,GAAG,KAAKL,EAAG,qBAAqBH,EAAIQ,GAAG,KAAKL,EAAG,sCAAsC,CAACE,YAAY,eAAeL,EAAIQ,GAAG,KAAKL,EAAG,qDAAqDH,EAAIQ,GAAG,KAAKL,EAAG,0BAA0BH,EAAIQ,GAAG,KAAKL,EAAG,MAAM,CAACE,YAAY,cAAc,CAACL,EAAIQ,GAAG,iBAAiBR,EAAIU,GAAGV,EAAIhE,SAAS,IAAIgE,EAAIU,GAAGV,EAAI9D,WAAW,WAAW,KACn7B,IGWpB,EACA,KACA,KACA,MAMoB,mBAAX,WAAuB,kBAAO6D,WAEnB,mBAAX,WAAuB,kBAAOA,WAE1B,UAAAA,UAAiB,QAGhCY,kBAAkBZ,UAAW,CAACa,aAAc,WAAc,OAAO,yCAAgJ1C,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOC,mBAAoB,WAAc,OAAO,yCAA8J5C,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOE,eAAgB,WAAc,OAAO,yCAAoJ7C,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOG,gBAAiB,WAAc,OAAO,yCAAsJ9C,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOI,gBAAiB,WAAc,OAAO,yCAAsJ/C,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOK,gCAAiC,WAAc,OAAO,yCAA0LhD,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOM,4CAA6C,WAAc,OAAO,yCAAsNjD,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA,MAAOO,qBAAsB,WAAc,OAAO,yCAAgKlD,MAAK,SAAS2C,GAAK,OAAOA,EAAW,SAAKA","file":"d3e7f5e.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"News editor\":\"News editor\"},\"zh\":{\"News editor\":\"新闻编辑器\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"Warning\":\"Warning\",\"The changes to the current page have not been saved. Do you want to discard them?\":\"The changes to the current page have not been saved. Do you want to discard them?\",\"Cancel\":\"Cancel\",\"Discard\":\"Discard\"},\"zh\":{\"Warning\":\"警告\",\"The changes to the current page have not been saved. Do you want to discard them?\":\"对当前页面的更改尚未保存。你想丢弃它们吗？\",\"Cancel\":\"取消\",\"Discard\":\"丢弃\"}}')\n  delete Component.options._Ctor\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"28f1127f\", content, true, {\"sourceMap\":false});","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ed-version{color:#8b8b8b;font-size:12px;position:fixed;bottom:0;right:0;z-index:99;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.5}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ed\"},[_c('editor-top-bar',{ref:\"topBar\",staticClass:\"ed-top\",on:{\"handleContentTranslate\":_vm.setContentLang}}),_vm._v(\" \"),_c('editor-top-middle-bar',{staticClass:\"ed-top-middle-bar\",on:{\"handleContentTranslate\":_vm.setContentLang}}),_vm._v(\" \"),_c('editor-side-left',{ref:\"sideLeft\",staticClass:\"ed-side ed-side-left scroll-bar\",attrs:{\"toggle-class\":\"ed-side-show\"}}),_vm._v(\" \"),_c('editor-side-right',{staticClass:\"ed-side ed-side-right scroll-bar\",attrs:{\"toggle-class\":\"ed-side-show\"}}),_vm._v(\" \"),_c('editor-main-stage'),_vm._v(\" \"),_c('editor-dialog-language-content-copy',{staticClass:\"scroll-bar\"}),_vm._v(\" \"),_c('editor-dialog-language-content-copy-module-option'),_vm._v(\" \"),_c('editor-session-checker'),_vm._v(\" \"),_c('div',{staticClass:\"ed-version\"},[_vm._v(\"\\n    version:\"+_vm._s(_vm.version)+\" \"+_vm._s(_vm.buildTime)+\"\\n  \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable*/\nimport pk from '../package.json'\nimport build from '@/static/temp/build.json'\nexport default {\n  name: 'IndexPage',\n  data () {\n    return {\n      mainLoading: true,\n      visible: false\n    }\n  },\n  head () {\n    return {\n      title: this.$t('News editor')\n    }\n  },\n  computed: {\n    version () {\n      return pk.version\n    },\n    buildTime () {\n      if (build && build.time) {\n        return `; build:${build.time}`\n      }\n      return ''\n    },\n    isChangeSaved () {\n      return this.$store.state.news.isChangeSaved\n    }\n  },\n  mounted () {\n    this.loadPageAndModuleData()\n    this.$store.state.news.newId = this.$route.query.id\n  },\n  methods: {\n    /**\n     * 切换内容语言\n     */\n    handleContentTranslate (val) {\n      // 判断是否保存\n      // 如已保存，清空历史数据，请求页面列表和组件数据\n      // 如未保存，弹框是否丢弃\n      //   如丢弃，清空历史数据，请求页面列表和组件数据\n      //   如取消，什么都不做，不切换语言\n      if (this.isChangeSaved) {\n        this.setContentLang(val)\n      } else {\n        this.$confirm(this.$t('The changes to the current page have not been saved. Do you want to discard them?'), this.$t('Warning'), {\n          confirmButtonText: this.$t('Cancel'),\n          cancelButtonText: this.$t('Discard'),\n          type: 'warning'\n        }).catch(() => {\n          this.setContentLang(val)\n          this.$message({\n            type: 'info',\n            message: this.$t('Discarded')\n          })\n        })\n      }\n    },\n    /**\n     * 请求页面列表及模块数据\n     */\n    loadPageAndModuleData () {\n      if(this.$route.query.id) {\n        const loading = this.$loading({\n          lock: true,\n          text: 'Loading',\n          spinner: 'el-icon-loading',\n          background: 'rgba(0, 0, 0, 0.7)'\n        });\n\n        this.$axios.get('/api/system/news/' + this.$route.query.id).then((res) => {\n          if(res?.data?.code !== 200 || !(res.data.data)) {\n            throw new Error('Server Error ' + res?.data?.msg)\n          }\n          // 处理服务器返回存入vuex\n          console.log('res is', res.data.data);\n          const initData = JSON.parse(JSON.stringify(res.data.data))\n\n          // 处理newsLangs\n          if(initData.newsLangs) {\n            const newsLangs = {}\n            console.log(initData.newsLangs, 'newsLangs')\n            initData.newsLangs.forEach(element => {\n              const content = element.content\n              // 处理components json\n              element.components = []\n              try {\n                if(content) {\n                  element.components = JSON.parse(content)\n                  console.log(JSON.parse(content), '首次反序列化成功')\n                }\n              } catch(e) {\n                if (content) {\n                  // 去掉p标签后，再次序列化\n                  const isPTag = /<p>.*<\\/p>/.test(content)\n                  if (isPTag) {\n                    const strContent = content.replace(/^<p>|<\\/p>$/g,'')\n                    try {\n                      element.components = JSON.parse(strContent)\n                      console.log('第二次反序列化成功')\n                    } catch (error) {\n                      console.log(error, '第二次反序列化失败')\n                      this.showWarn()\n                    }\n                  } else {\n                    console.log(e, '首次反序列化失败')\n                    this.showWarn()\n                  }\n                }\n              }\n              newsLangs[element.language] = element\n            });\n            initData.newsLangs = newsLangs\n          }\n          this.$store.commit('news/setNewsData', initData)\n        })\n        .catch((err) => {\n          this.$message({\n            message: this.$t('Save failed, Please try again later ' + err.message),\n            type: 'error'\n          })\n        })\n        .finally(() => {\n          loading.close()\n        })\n      }\n    },\n    setContentLang (val) {\n      this.$store.commit('news/setContentLang', val)\n    },\n    showWarn() {\n      this.$alert('该新闻数据格式错误，暂不支持在编辑器修改', '提示', {\n        showConfirmButton: false,\n        showClose: false,\n        type: 'warning',\n      })\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a7e203d&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./index.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\nimport block1 from \"./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"\nif (typeof block1 === 'function') block1(component)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {EditorTopBar: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/top-bar.vue' /* webpackChunkName: \"components/editor-top-bar\" */).then(function(m) { return m['default'] || m }) },EditorTopMiddleBar: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/top-middle-bar.vue' /* webpackChunkName: \"components/editor-top-middle-bar\" */).then(function(m) { return m['default'] || m }) },EditorSideLeft: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/side-left.vue' /* webpackChunkName: \"components/editor-side-left\" */).then(function(m) { return m['default'] || m }) },EditorSideRight: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/side-right.vue' /* webpackChunkName: \"components/editor-side-right\" */).then(function(m) { return m['default'] || m }) },EditorMainStage: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/main-stage.vue' /* webpackChunkName: \"components/editor-main-stage\" */).then(function(m) { return m['default'] || m }) },EditorDialogLanguageContentCopy: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/dialog/language-content-copy.vue' /* webpackChunkName: \"components/editor-dialog-language-content-copy\" */).then(function(m) { return m['default'] || m }) },EditorDialogLanguageContentCopyModuleOption: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/dialog/language-content-copy-module-option.vue' /* webpackChunkName: \"components/editor-dialog-language-content-copy-module-option\" */).then(function(m) { return m['default'] || m }) },EditorSessionChecker: function () { return import('E:/project/beiqi/beiqi-web-master-news-editor-nuxt2/components/editor/session-checker.vue' /* webpackChunkName: \"components/editor-session-checker\" */).then(function(m) { return m['default'] || m }) }})\n"],"sourceRoot":""}