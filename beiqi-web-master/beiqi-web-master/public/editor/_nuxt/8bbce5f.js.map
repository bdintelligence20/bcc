{"version":3,"sources":["webpack:///./pages/index.vue?c918","webpack:///./pages/index.vue?3bce","webpack:///./pages/index.vue?1293","webpack:///./pages/index.vue?373b","webpack:///./pages/index.vue?37c4","webpack:///./pages/index.vue?33c9","webpack:///./pages/index.vue?f4b3","webpack:///./pages/index.vue","webpack:///./pages/index.vue?b1ff","webpack:///./pages/index.vue?b245"],"names":["module","exports","Component","options","__i18n","push","_Ctor","content","__esModule","default","i","locals","add","___CSS_LOADER_EXPORT___","___CSS_LOADER_API_IMPORT___","name","data","mainLoading","visible","head","title","this","$t","computed","version","pk","buildTime","build","time","isChangeSaved","$store","state","news","mounted","loadPageAndModuleData","newId","$route","query","id","methods","handleContentTranslate","val","setContentLang","$confirm","confirmButtonText","cancelButtonText","type","catch","$message","message","loading","$loading","lock","text","spinner","background","$axios","get","then","res","code","Error","msg","console","log","initData","JSON","parse","stringify","newsLangs","forEach","element","components","e","test","strContent","replace","error","showWarn","language","commit","err","finally","close","$alert","showConfirmButton","showClose","component","_vm","_c","_self","staticClass","ref","on","_v","attrs","_s","installComponents","EditorTopBar","m","EditorTopMiddleBar","EditorSideLeft","EditorSideRight","EditorMainStage","EditorDialogLanguageContentCopy","EditorDialogLanguageContentCopyModuleOption","EditorSessionChecker"],"mappings":"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","file":"8bbce5f.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"News editor\":\"News editor\"},\"zh\":{\"News editor\":\"新闻编辑器\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"Warning\":\"Warning\",\"The changes to the current page have not been saved. Do you want to discard them?\":\"The changes to the current page have not been saved. Do you want to discard them?\",\"Cancel\":\"Cancel\",\"Discard\":\"Discard\"},\"zh\":{\"Warning\":\"警告\",\"The changes to the current page have not been saved. Do you want to discard them?\":\"对当前页面的更改尚未保存。你想丢弃它们吗？\",\"Cancel\":\"取消\",\"Discard\":\"丢弃\"}}')\n  delete Component.options._Ctor\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0a7e203d&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f819b17c\", content, true, {\"sourceMap\":false});","export * from \"-!../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0a7e203d&prod&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ed-version{color:#8b8b8b;font-size:12px;position:fixed;bottom:0;right:0;z-index:99;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.5}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"","\r\n/* eslint-disable*/\r\nimport pk from '../package.json'\r\nimport build from '@/static/temp/build.json'\r\nexport default {\r\n  name: 'IndexPage',\r\n  data () {\r\n    return {\r\n      mainLoading: true,\r\n      visible: false\r\n    }\r\n  },\r\n  head () {\r\n    return {\r\n      title: this.$t('News editor')\r\n    }\r\n  },\r\n  computed: {\r\n    version () {\r\n      return pk.version\r\n    },\r\n    buildTime () {\r\n      if (build && build.time) {\r\n        return `; build:${build.time}`\r\n      }\r\n      return ''\r\n    },\r\n    isChangeSaved () {\r\n      return this.$store.state.news.isChangeSaved\r\n    }\r\n  },\r\n  mounted () {\r\n    this.loadPageAndModuleData()\r\n    this.$store.state.news.newId = this.$route.query.id\r\n  },\r\n  methods: {\r\n    /**\r\n     * 切换内容语言\r\n     */\r\n    handleContentTranslate (val) {\r\n      // 判断是否保存\r\n      // 如已保存，清空历史数据，请求页面列表和组件数据\r\n      // 如未保存，弹框是否丢弃\r\n      //   如丢弃，清空历史数据，请求页面列表和组件数据\r\n      //   如取消，什么都不做，不切换语言\r\n      if (this.isChangeSaved) {\r\n        this.setContentLang(val)\r\n      } else {\r\n        this.$confirm(this.$t('The changes to the current page have not been saved. Do you want to discard them?'), this.$t('Warning'), {\r\n          confirmButtonText: this.$t('Cancel'),\r\n          cancelButtonText: this.$t('Discard'),\r\n          type: 'warning'\r\n        }).catch(() => {\r\n          this.setContentLang(val)\r\n          this.$message({\r\n            type: 'info',\r\n            message: this.$t('Discarded')\r\n          })\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * 请求页面列表及模块数据\r\n     */\r\n    loadPageAndModuleData () {\r\n      if(this.$route.query.id) {\r\n        const loading = this.$loading({\r\n          lock: true,\r\n          text: 'Loading',\r\n          spinner: 'el-icon-loading',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n\r\n        this.$axios.get('/api/system/news/' + this.$route.query.id).then((res) => {\r\n          if(res?.data?.code !== 200 || !(res.data.data)) {\r\n            throw new Error('Server Error ' + res?.data?.msg)\r\n          }\r\n          // 处理服务器返回存入vuex\r\n          console.log('res is', res.data.data);\r\n          const initData = JSON.parse(JSON.stringify(res.data.data))\r\n\r\n          // 处理newsLangs\r\n          if(initData.newsLangs) {\r\n            const newsLangs = {}\r\n            console.log(initData.newsLangs, 'newsLangs')\r\n            initData.newsLangs.forEach(element => {\r\n              const content = element.content\r\n              // 处理components json\r\n              element.components = []\r\n              try {\r\n                if(content) {\r\n                  element.components = JSON.parse(content)\r\n                  console.log(JSON.parse(content), '首次反序列化成功')\r\n                }\r\n              } catch(e) {\r\n                if (content) {\r\n                  // 去掉p标签后，再次序列化\r\n                  const isPTag = /<p>.*<\\/p>/.test(content)\r\n                  if (isPTag) {\r\n                    const strContent = content.replace(/^<p>|<\\/p>$/g,'')\r\n                    try {\r\n                      element.components = JSON.parse(strContent)\r\n                      console.log('第二次反序列化成功')\r\n                    } catch (error) {\r\n                      console.log(error, '第二次反序列化失败')\r\n                      this.showWarn()\r\n                    }\r\n                  } else {\r\n                    console.log(e, '首次反序列化失败')\r\n                    this.showWarn()\r\n                  }\r\n                }\r\n              }\r\n              newsLangs[element.language] = element\r\n            });\r\n            initData.newsLangs = newsLangs\r\n          }\r\n          this.$store.commit('news/setNewsData', initData)\r\n        })\r\n        .catch((err) => {\r\n          this.$message({\r\n            message: this.$t('Save failed, Please try again later ' + err.message),\r\n            type: 'error'\r\n          })\r\n        })\r\n        .finally(() => {\r\n          loading.close()\r\n        })\r\n      }\r\n    },\r\n    setContentLang (val) {\r\n      this.$store.commit('news/setContentLang', val)\r\n    },\r\n    showWarn() {\r\n      this.$alert('该新闻数据格式错误，暂不支持在编辑器修改', '提示', {\r\n        showConfirmButton: false,\r\n        showClose: false,\r\n        type: 'warning',\r\n      })\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a7e203d&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0a7e203d&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./index.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\nimport block1 from \"./index.vue?vue&type=custom&index=1&blockType=i18n&lang=json\"\nif (typeof block1 === 'function') block1(component)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {EditorTopBar: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/top-bar.vue' /* webpackChunkName: \"components/editor-top-bar\" */).then(function(m) { return m['default'] || m }) },EditorTopMiddleBar: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/top-middle-bar.vue' /* webpackChunkName: \"components/editor-top-middle-bar\" */).then(function(m) { return m['default'] || m }) },EditorSideLeft: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/side-left.vue' /* webpackChunkName: \"components/editor-side-left\" */).then(function(m) { return m['default'] || m }) },EditorSideRight: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/side-right.vue' /* webpackChunkName: \"components/editor-side-right\" */).then(function(m) { return m['default'] || m }) },EditorMainStage: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/main-stage.vue' /* webpackChunkName: \"components/editor-main-stage\" */).then(function(m) { return m['default'] || m }) },EditorDialogLanguageContentCopy: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/dialog/language-content-copy.vue' /* webpackChunkName: \"components/editor-dialog-language-content-copy\" */).then(function(m) { return m['default'] || m }) },EditorDialogLanguageContentCopyModuleOption: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/dialog/language-content-copy-module-option.vue' /* webpackChunkName: \"components/editor-dialog-language-content-copy-module-option\" */).then(function(m) { return m['default'] || m }) },EditorSessionChecker: function () { return import('G:/homeWork/work/2023work/北汽新闻编辑器/beiqi-web-master-news-editor-nuxt2/components/editor/session-checker.vue' /* webpackChunkName: \"components/editor-session-checker\" */).then(function(m) { return m['default'] || m }) }})\n"],"sourceRoot":""}