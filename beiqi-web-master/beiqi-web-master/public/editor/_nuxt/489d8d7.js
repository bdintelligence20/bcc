(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{924:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"News editor":"News editor"},"zh":{"News editor":"新闻编辑器"}}'),delete e.options._Ctor}},925:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"Warning":"Warning","The changes to the current page have not been saved. Do you want to discard them?":"The changes to the current page have not been saved. Do you want to discard them?","Cancel":"Cancel","Discard":"Discard"},"zh":{"Warning":"警告","The changes to the current page have not been saved. Do you want to discard them?":"对当前页面的更改尚未保存。你想丢弃它们吗？","Cancel":"取消","Discard":"丢弃"}}'),delete e.options._Ctor}},928:function(e,t,n){var content=n(937);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("f819b17c",content,!0,{sourceMap:!1})},934:function(e){e.exports=JSON.parse('{"name":"nuxt-editor-spa","version":"1.0.0","private":true,"scripts":{"dev":"nuxt","build":"nuxt build --mode development","start":"nuxt start","generate":"nuxt generate","lint:js":"eslint --ext \\".js,.vue\\" --ignore-path .gitignore .","lint:style":"stylelint \\"**/*.{css,scss,sass,html,vue}\\" --ignore-path .gitignore","lint":"yarn lint:js && yarn lint:style","lintfix":"yarn lint:js --fix && yarn lint:style --fix"},"dependencies":{"@ice/stark-data":"^0.1.2","@nuxtjs/axios":"^5.13.6","@nuxtjs/i18n":"^7.2.2","animate.css":"^4.1.1","core-js":"^3.19.3","countup.js":"^2.3.2","element-ui":"2.15.6","moment":"^2.29.4","normalize.css":"^8.0.1","nuxt":"^2.15.8","sortablejs":"1.14.0","spritejs":"^3.8.1","vue":"^2.6.14","vue-awesome-swiper":"3.0.7","vue-countup-v2":"^4.0.0","vue-cropper":"^0.6.4","vue-server-renderer":"^2.6.14","vue-set-path":"^1.1.9","vue-template-compiler":"^2.6.14","webpack":"^4.46.0"},"devDependencies":{"@babel/eslint-parser":"^7.16.3","@nuxtjs/eslint-config":"^8.0.0","@nuxtjs/eslint-module":"^3.0.2","@nuxtjs/stylelint-module":"^4.1.0","@nuxtjs/svg":"^0.4.0","eslint":"^8.4.1","eslint-plugin-nuxt":"^3.1.0","eslint-plugin-vue":"^8.2.0","postcss-html":"^1.3.0","sass":"^1.53.0","sass-loader":"^10","stylelint":"^14.1.0","stylelint-config-recommended-vue":"^1.1.0","stylelint-config-standard":"^24.0.0"}}')},935:function(e){e.exports=JSON.parse('{"time":"2024-06-20T01:53:25.252Z"}')},936:function(e,t,n){"use strict";n(928)},937:function(e,t,n){var o=n(7)(!1);o.push([e.i,".ed-version{color:#8b8b8b;font-size:12px;position:fixed;bottom:0;right:0;z-index:99;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.5}",""]),e.exports=o},938:function(e,t,n){"use strict";var o=n(924),r=n.n(o);t.default=r.a},939:function(e,t,n){"use strict";var o=n(925),r=n.n(o);t.default=r.a},943:function(e,t,n){"use strict";n.r(t);n(5),n(14),n(28),n(52);var o=n(934),r=n(935),l={name:"IndexPage",data:function(){return{mainLoading:!0,visible:!1}},head:function(){return{title:this.$t("News editor")}},computed:{version:function(){return o.version},buildTime:function(){return r&&r.time?"; build:".concat(r.time):""},isChangeSaved:function(){return this.$store.state.news.isChangeSaved}},mounted:function(){this.loadPageAndModuleData(),this.$store.state.news.newId=this.$route.query.id},methods:{handleContentTranslate:function(e){var t=this;this.isChangeSaved?this.setContentLang(e):this.$confirm(this.$t("The changes to the current page have not been saved. Do you want to discard them?"),this.$t("Warning"),{confirmButtonText:this.$t("Cancel"),cancelButtonText:this.$t("Discard"),type:"warning"}).catch((function(){t.setContentLang(e),t.$message({type:"info",message:t.$t("Discarded")})}))},loadPageAndModuleData:function(){var e=this;if(this.$route.query.id){var t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$axios.get("/api/system/news/"+this.$route.query.id).then((function(t){var n,o;if(200!==(null==t||null===(n=t.data)||void 0===n?void 0:n.code)||!t.data.data)throw new Error("Server Error "+(null==t||null===(o=t.data)||void 0===o?void 0:o.msg));console.log("res is",t.data.data);var r=JSON.parse(JSON.stringify(t.data.data));if(r.newsLangs){var l={};console.log(r.newsLangs,"newsLangs"),r.newsLangs.forEach((function(element){var content=element.content;element.components=[];try{content&&(element.components=JSON.parse(content),console.log(JSON.parse(content),"首次反序列化成功"))}catch(n){if(content)if(/<p>.*<\/p>/.test(content)){var t=content.replace(/^<p>|<\/p>$/g,"");try{element.components=JSON.parse(t),console.log("第二次反序列化成功")}catch(t){console.log(t,"第二次反序列化失败"),e.showWarn()}}else console.log(n,"首次反序列化失败"),e.showWarn()}l[element.language]=element})),r.newsLangs=l}e.$store.commit("news/setNewsData",r)})).catch((function(t){e.$message({message:e.$t("Save failed, Please try again later "+t.message),type:"error"})})).finally((function(){t.close()}))}},setContentLang:function(e){this.$store.commit("news/setContentLang",e)},showWarn:function(){this.$alert("该新闻数据格式错误，暂不支持在编辑器修改","提示",{showConfirmButton:!1,showClose:!1,type:"warning"})}}},d=(n(936),n(1)),c=n(938),h=n(939),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ed"},[t("editor-top-bar",{ref:"topBar",staticClass:"ed-top",on:{handleContentTranslate:e.setContentLang}}),e._v(" "),t("editor-top-middle-bar",{staticClass:"ed-top-middle-bar",on:{handleContentTranslate:e.setContentLang}}),e._v(" "),t("editor-side-left",{ref:"sideLeft",staticClass:"ed-side ed-side-left scroll-bar",attrs:{"toggle-class":"ed-side-show"}}),e._v(" "),t("editor-side-right",{staticClass:"ed-side ed-side-right scroll-bar",attrs:{"toggle-class":"ed-side-show"}}),e._v(" "),t("editor-main-stage"),e._v(" "),t("editor-dialog-language-content-copy",{staticClass:"scroll-bar"}),e._v(" "),t("editor-dialog-language-content-copy-module-option"),e._v(" "),t("editor-session-checker"),e._v(" "),t("div",{staticClass:"ed-version"},[e._v("\n    version:"+e._s(e.version)+" "+e._s(e.buildTime)+"\n  ")])],1)}),[],!1,null,null,null);"function"==typeof c.default&&Object(c.default)(component),"function"==typeof h.default&&Object(h.default)(component);t.default=component.exports;installComponents(component,{EditorTopBar:function(){return Promise.resolve().then(n.bind(null,580)).then((function(e){return e.default||e}))},EditorTopMiddleBar:function(){return Promise.resolve().then(n.bind(null,581)).then((function(e){return e.default||e}))},EditorSideLeft:function(){return Promise.resolve().then(n.bind(null,578)).then((function(e){return e.default||e}))},EditorSideRight:function(){return Promise.resolve().then(n.bind(null,579)).then((function(e){return e.default||e}))},EditorMainStage:function(){return Promise.resolve().then(n.bind(null,576)).then((function(e){return e.default||e}))},EditorDialogLanguageContentCopy:function(){return Promise.resolve().then(n.bind(null,584)).then((function(e){return e.default||e}))},EditorDialogLanguageContentCopyModuleOption:function(){return Promise.resolve().then(n.bind(null,583)).then((function(e){return e.default||e}))},EditorSessionChecker:function(){return Promise.resolve().then(n.bind(null,577)).then((function(e){return e.default||e}))}})}}]);
//# sourceMappingURL=489d8d7.js.map